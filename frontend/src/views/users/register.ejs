<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head') %>

<body>
  <%- include('../partials/header') %>

  <main class="main-content auth-page">
    <div class="container-fluid">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-header">
            <h2 class="auth-title">
              <i class="bi bi-person-plus-fill me-2"></i>Registro de Paciente
            </h2>
            <p class="auth-subtitle">Crea tu cuenta para solicitar citas en nuestra clínica</p>
          </div>

          <form id="registerForm" class="auth-form" method="POST" action="/users/register">
            <!-- Rol oculto, siempre PATIENT -->
            <input type="hidden" id="role" name="role" value="PATIENT" />

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName" class="form-label">
                  <i class="bi bi-person me-1"></i>Nombre
                </label>
                <input type="text" class="form-control auth-input" id="firstName" name="firstName" placeholder="Tu nombre" required minlength="2" />
              </div>
              <div class="col-md-6 mb-3">
                <label for="lastName" class="form-label">
                  <i class="bi bi-person me-1"></i>Apellido
                </label>
                <input type="text" class="form-control auth-input" id="lastName" name="lastName" placeholder="Tu apellido" required minlength="2" />
              </div>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">
                <i class="bi bi-envelope me-1"></i>Correo electrónico
              </label>
              <input type="email" class="form-control auth-input" id="email" name="email" placeholder="ejemplo@correo.com" required />
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="dni" class="form-label">
                  <i class="bi bi-card-text me-1"></i>DNI/Cédula
                </label>
                <input type="text" class="form-control auth-input" id="cardIdentity" name="cardIdentity" placeholder="12345678" required />
              </div>

              <div class="mb-3">
                <label for="birthDate" class="form-label">
                  <i class="bi bi-calendar me-1"></i>Fecha de nacimiento
                </label>
                <input type="date" class="form-control auth-input" id="birthDate" name="birthDate" required />
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="street" class="form-label">Calle</label>
                  <input type="text" class="form-control auth-input" id="street" name="street" required />
                </div>
                <div class="col-md-2 mb-3">
                  <label for="number" class="form-label">Número</label>
                  <input type="number" class="form-control auth-input" id="number" name="number" required />
                </div>
                <div class="col-md-4 mb-3">
                  <label for="location" class="form-label">Localidad</label>
                  <input type="text" class="form-control auth-input" id="location" name="location" required />
                </div>
              </div>
              <div class="mb-3">
                <label for="province" class="form-label">Provincia</label>
                <input type="text" class="form-control auth-input" id="province" name="province" required />
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="password" class="form-label">
                    <i class="bi bi-lock me-1"></i>Contraseña
                  </label>
                  <input type="password" class="form-control auth-input" id="password" name="password" placeholder="Mínimo 8 caracteres" required minlength="8" />
                </div>
                <div class="col-md-6 mb-4">
                  <label for="confirmPassword" class="form-label">
                    <i class="bi bi-lock-fill me-1"></i>Confirmar Contraseña
                  </label>
                  <input type="password" class="form-control auth-input" id="confirmPassword" name="confirmPassword" placeholder="Repite tu contraseña" required />
                </div>
              </div>

              <button type="submit" class="btn auth-btn-primary w-100 mb-3">
                <i class="bi bi-person-check me-2"></i>Crear cuenta de paciente
              </button>

              <div class="auth-footer">
                <p>¿Ya tienes una cuenta? <a href="/users/login" class="auth-link">Inicia sesión aquí</a></p>
                <p class="mt-2"><small class="text-muted">
                    <i class="bi bi-shield-check me-1"></i>
                    Tus datos están protegidos y solo serán utilizados para brindarte atención médica
                  </small></p>
              </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <%- include('../partials/footer') %>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script src="/js/api/config.js"></script>
  <script src="/js/api/utils.js"></script>
  <script src="/js/api/auth-api.js"></script>

  <!-- Controlador de página -->
  <script type="module" src="/js/client-controllers/auth/register-controller.js"></script>
</body>

</html>